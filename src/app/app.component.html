<nav class="navbar" [ngClass]="{ 'bg-red': !lConnected }">
  <a href="/" class="navbar-brand">
    <img
      src="https://getbootstrap.com/docs/4.0/assets/brand/bootstrap-solid.svg"
      width="30"
      height="30"
      alt=""
    />
    Web Status Monitor
  </a>
  <span class="navbar-text">
    Connection state: {{ lConnected ? "Connected" : "Disconnected" }}
  </span>
</nav>
<div class="container-fluid main--container margin--custom">
  <div class="row">
    <div class="col-12 main--minus">
      <div class="row justify-content-center">
        <ng-container *ngIf="!compactView">
          <div class="col-3 mt-3" *ngFor="let core of aCoreData">
            <div
              class="card"
              [ngClass]="{ 'bg-red': !core.socket.lConnectionOpen }"
            >
              <div class="card-body">
                <h5 class="card-title text-center">{{ core.name }}</h5>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item bg-dark text-center">
                    CPU: {{ core.data?.CPU | number: "1.0-0" }}%
                    <div class="progress bg-dark">
                      <div
                        class="progress-bar"
                        [style]="'width:' + core.data?.CPU + '%'"
                        [ngClass]="{'bg-red': core.data?.CPU > 80}"
                        role="progressbar"
                        aria-valuemin="0"
                        aria-valuemax="100"
                      ></div>
                    </div>
                  </li>
                  <li class="list-group-item bg-dark text-center">
                    Memory (used):
                    {{ core.data?.MemUsed / 1024 | number: "1.2-2" }} GB
                    <div class="progress bg-dark">
                      <div
                        class="progress-bar"
                        [style]="'width:' + (100 - (core.data?.MemFree / core.data?.MemUsed * 100)) + '%'"
                        [ngClass]="{'bg-red': (100 - (core.data?.MemFree / core.data?.MemUsed * 100)) > 90}"
                        role="progressbar"
                        aria-valuemin="0"
                        aria-valuemax="100"
                      ></div>
                    </div>
                  </li>
                  <li class="list-group-item bg-dark text-center">
                    Memory (free):
                    {{ core.data?.MemFree / 1024 | number: "1.2-2" }} GB
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </ng-container>

        <!-- Processor monitor -->
        <div
          *ngIf="compactView"
          class="col-3"
          [ngClass]="{ compact: compactView, 'mt-3': !compactView }"
        >
          <div class="card">
            <div class="card-body">
              <h5 class="card-title text-center">Teljesítmény adatok</h5>
              <table class="table table-striped table-dark mb-0">
                <tbody>
                  <tr *ngFor="let core of aCoreData" class="text-center">
                    <td>{{ core.name }}</td>
                    <td>Processzor: {{ core.data?.CPU | number: "1.0-0" }}%</td>
                    <td>
                      Memória:
                      {{ core.data?.MemUsed / 1024 | number: "1.2-2" }} GB
                    </td>
                    <td>
                      Szabad Memória:
                      {{ core.data?.MemFree / 1024 | number: "1.2-2" }} GB
                    </td>
                    <!-- <td>Kérések száma: 112 / min</td> -->
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
